# 基本概念

- **工作区**

正常情况下能看到的目录(不包括隐藏文件)

- **暂存区** 

工作目录下的隐藏目录`.git`目录下的`.index`文件,因此也称为索引.

- **版本库**

工作目录下的隐藏目录`.git`目录

**图解**

下图展示了工作区,暂存区,版本库之间的关系:

![relationship](../images/relationship.jpg)

图中左侧是工作区,右侧是版本库,版本库中标记`index` 的区域是暂存区,标记 `master` 的是 `master` 分支所代表的目录树.

`HEAD` 是指向 `master` 分支的指针,标记 `objects` 的区域是 `git` 的对象库,真实路径位于`.git/objects`目录下,用于表示创建的对象和内容.

解释常用命令背后的故事

- **`git add` 添加文件**

工作区的修改或者新增的文件执行`git add` 命令后,暂存区(index)的目录树会自动更新,同时引发这次变化的文件内容会被记录下来,即生成对象库(objects)中的新对象,而对象的 id会被记录到暂存区的文件索引(index)中.

- **`git commit` 提交文件**

暂存区的目录树写入到对象库(objects),`master` 分支的目录树自动更新.

- **`git reset HEAD` 撤销文件**

暂存区的目录树被重写,被`master` 分支的目录树所替换,但是工作区不受影响.

- **`git rm --cached <file>` 删除缓存文件**

删除暂存区文件,工作区不受影响.




